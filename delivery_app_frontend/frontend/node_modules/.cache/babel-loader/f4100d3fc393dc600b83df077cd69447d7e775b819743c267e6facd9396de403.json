{"ast":null,"code":"import MaterialButton from \"@/components/MaterialButton.vue\";\nimport axios from \"axios\";\nimport FormRegisterConsumers from \"./components/Forms/FormRegisterConsumers.vue\";\nimport FormViewConsumers from \"./components/Forms/FormViewConsumers.vue\"; // Atualize a importação\n\nexport default {\n  name: \"clients\",\n  components: {\n    MaterialButton,\n    FormRegisterConsumers,\n    FormViewConsumers // Adiciona o novo componente\n  },\n  data() {\n    return {\n      clients: [],\n      filteredClients: [],\n      loading: true,\n      cacheClients: null,\n      searchQuery: \"\",\n      isAddClientModalVisible: false,\n      isViewClientModalVisible: false,\n      selectedClient: {} // Armazena o cliente selecionado\n    };\n  },\n  methods: {\n    async getClients() {\n      this.loading = true;\n      if (this.cacheClients) {\n        this.clients = this.cacheClients;\n        this.filteredClients = this.clients;\n        this.loading = false;\n        return;\n      }\n      try {\n        const response = await axios.get(\"http://localhost:8000/api/v2/clientes\");\n        this.clients = response.data;\n        this.cacheClients = response.data;\n        this.filteredClients = this.clients;\n      } catch (error) {\n        console.error(\"Erro ao buscar clientes:\", error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    filterClients() {\n      if (this.searchQuery) {\n        this.filteredClients = this.clients.filter(cliente => cliente.nome_completo.toLowerCase().includes(this.searchQuery.toLowerCase()));\n      } else {\n        this.filteredClients = this.clients;\n      }\n    },\n    openAddClientModal() {\n      this.isAddClientModalVisible = true;\n    },\n    viewClient(cliente) {\n      this.selectedClient = cliente; // Armazena o cliente selecionado\n      this.isViewClientModalVisible = true; // Abre o modal de visualização\n    },\n    formatDate(timestamp) {\n      const date = new Date(timestamp);\n      return date.toLocaleDateString(\"pt-BR\");\n    }\n  },\n  mounted() {\n    this.getClients();\n  }\n};","map":{"version":3,"names":["MaterialButton","axios","FormRegisterConsumers","FormViewConsumers","name","components","data","clients","filteredClients","loading","cacheClients","searchQuery","isAddClientModalVisible","isViewClientModalVisible","selectedClient","methods","getClients","response","get","error","console","filterClients","filter","cliente","nome_completo","toLowerCase","includes","openAddClientModal","viewClient","formatDate","timestamp","date","Date","toLocaleDateString","mounted"],"sources":["C:\\Gabriel\\Codes\\SGMW\\resources\\delivery_app_frontend\\frontend\\src\\views\\Consumers.vue"],"sourcesContent":["<template>\r\n  <div class=\"container-fluid py-4\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card my-4\">\r\n          <div class=\"card-header p-0 position-relative mt-n4 mx-3 z-index-2\">\r\n            <div\r\n              class=\"bg-gradient-info shadow-success border-radius-lg pt-4 pb-3\"\r\n            >\r\n              <h6 class=\"text-white text-capitalize ps-3\">Clientes</h6>\r\n            </div>\r\n          </div>\r\n          <div class=\"card-body px-0 pb-2\">\r\n            <div\r\n              class=\"d-flex justify-content-end align-items-center mb-4 me-4\"\r\n            >\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control me-2\"\r\n                placeholder=\"Buscar cliente...\"\r\n                v-model=\"searchQuery\"\r\n                @input=\"filterClients\"\r\n                style=\"width: 300px\"\r\n              />\r\n              <material-button\r\n                class=\"btn btn-primary\"\r\n                @click=\"openAddClientModal\"\r\n              >\r\n                Adicionar\r\n              </material-button>\r\n            </div>\r\n            <div class=\"table-responsive p-0\">\r\n              <div v-if=\"loading\" class=\"text-center my-3\">\r\n                <span\r\n                  class=\"spinner-border spinner-border-sm\"\r\n                  role=\"status\"\r\n                  aria-hidden=\"true\"\r\n                ></span>\r\n                <span> Carregando...</span>\r\n              </div>\r\n              <table\r\n                v-else\r\n                class=\"table align-items-center justify-content-center mb-0\"\r\n              >\r\n                <thead>\r\n                  <tr>\r\n                    <th\r\n                      class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n                    >\r\n                      Nome\r\n                    </th>\r\n                    <th\r\n                      class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2\"\r\n                    >\r\n                      Cpf\r\n                    </th>\r\n                    <th\r\n                      class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2\"\r\n                    >\r\n                      Tipo Pessoa\r\n                    </th>\r\n                    <th\r\n                      class=\"text-uppercase text-secondary text-xxs font-weight-bolder text-center opacity-7 ps-2\"\r\n                    >\r\n                      Criado em\r\n                    </th>\r\n                    <th></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"cliente in filteredClients\" :key=\"cliente.id\">\r\n                    <td>\r\n                      <div class=\"d-flex px-2\">\r\n                        <div class=\"my-auto\">\r\n                          <h6 class=\"mb-0 text-sm\">\r\n                            {{ cliente.nome_completo }}\r\n                          </h6>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <p class=\"text-sm font-weight-bold mb-0\">\r\n                        {{ cliente.cpf }}\r\n                      </p>\r\n                    </td>\r\n                    <td>\r\n                      <span class=\"text-xs font-weight-bold\">{{\r\n                        cliente.tipo_cadastro\r\n                      }}</span>\r\n                    </td>\r\n                    <td class=\"align-middle text-center\">\r\n                      <span class=\"me-2 text-xs font-weight-bold\">{{\r\n                        formatDate(cliente.created_at)\r\n                      }}</span>\r\n                    </td>\r\n                    <td class=\"align-middle\">\r\n                      <button\r\n                        class=\"btn btn-link text-secondary mb-0\"\r\n                        @click=\"viewClient(cliente)\"\r\n                      >\r\n                        <i class=\"fa fa-eye text-xs\" aria-hidden=\"true\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <div\r\n                v-if=\"\r\n                  !loading && (!filteredClients || filteredClients.length === 0)\r\n                \"\r\n                class=\"text-center my-3\"\r\n              >\r\n                <span>Nenhum cliente encontrado</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal de Adicionar Cliente -->\r\n    <form-register-consumers\r\n      :is-visible=\"isAddClientModalVisible\"\r\n      @update:isVisible=\"isAddClientModalVisible = $event\"\r\n      @client-added=\"getClients\"\r\n    ></form-register-consumers>\r\n\r\n    <!-- Modal de Visualização do Cliente -->\r\n    <form-view-consumers\r\n      :is-visible=\"isViewClientModalVisible\"\r\n      :cliente=\"selectedClient\"\r\n      @update:isVisible=\"isViewClientModalVisible = $event\"\r\n    ></form-view-consumers>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MaterialButton from \"@/components/MaterialButton.vue\";\r\nimport axios from \"axios\";\r\nimport FormRegisterConsumers from \"./components/Forms/FormRegisterConsumers.vue\";\r\nimport FormViewConsumers from \"./components/Forms/FormViewConsumers.vue\"; // Atualize a importação\r\n\r\nexport default {\r\n  name: \"clients\",\r\n  components: {\r\n    MaterialButton,\r\n    FormRegisterConsumers,\r\n    FormViewConsumers, // Adiciona o novo componente\r\n  },\r\n  data() {\r\n    return {\r\n      clients: [],\r\n      filteredClients: [],\r\n      loading: true,\r\n      cacheClients: null,\r\n      searchQuery: \"\",\r\n      isAddClientModalVisible: false,\r\n      isViewClientModalVisible: false,\r\n      selectedClient: {}, // Armazena o cliente selecionado\r\n    };\r\n  },\r\n  methods: {\r\n    async getClients() {\r\n      this.loading = true;\r\n\r\n      if (this.cacheClients) {\r\n        this.clients = this.cacheClients;\r\n        this.filteredClients = this.clients;\r\n        this.loading = false;\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(\r\n          \"http://localhost:8000/api/v2/clientes\"\r\n        );\r\n        this.clients = response.data;\r\n        this.cacheClients = response.data;\r\n        this.filteredClients = this.clients;\r\n      } catch (error) {\r\n        console.error(\"Erro ao buscar clientes:\", error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    filterClients() {\r\n      if (this.searchQuery) {\r\n        this.filteredClients = this.clients.filter((cliente) =>\r\n          cliente.nome_completo\r\n            .toLowerCase()\r\n            .includes(this.searchQuery.toLowerCase())\r\n        );\r\n      } else {\r\n        this.filteredClients = this.clients;\r\n      }\r\n    },\r\n    openAddClientModal() {\r\n      this.isAddClientModalVisible = true;\r\n    },\r\n    viewClient(cliente) {\r\n      this.selectedClient = cliente; // Armazena o cliente selecionado\r\n      this.isViewClientModalVisible = true; // Abre o modal de visualização\r\n    },\r\n    formatDate(timestamp) {\r\n      const date = new Date(timestamp);\r\n      return date.toLocaleDateString(\"pt-BR\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getClients();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.bg-gradient-info {\r\n  background: linear-gradient(to right, #ffbb33, #222222);\r\n}\r\n.btn-primary {\r\n  background: #ffbb33;\r\n}\r\n.btn-primary:hover {\r\n  background-color: #222222;\r\n}\r\n</style>\r\n"],"mappings":"AAyIA,OAAOA,cAAa,MAAO,iCAAiC;AAC5D,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,qBAAoB,MAAO,8CAA8C;AAChF,OAAOC,iBAAgB,MAAO,0CAA0C,EAAE;;AAE1E,eAAe;EACbC,IAAI,EAAE,SAAS;EACfC,UAAU,EAAE;IACVL,cAAc;IACdE,qBAAqB;IACrBC,iBAAiB,CAAE;EACrB,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,EAAE;MACXC,eAAe,EAAE,EAAE;MACnBC,OAAO,EAAE,IAAI;MACbC,YAAY,EAAE,IAAI;MAClBC,WAAW,EAAE,EAAE;MACfC,uBAAuB,EAAE,KAAK;MAC9BC,wBAAwB,EAAE,KAAK;MAC/BC,cAAc,EAAE,CAAC,CAAC,CAAE;IACtB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAA,EAAG;MACjB,IAAI,CAACP,OAAM,GAAI,IAAI;MAEnB,IAAI,IAAI,CAACC,YAAY,EAAE;QACrB,IAAI,CAACH,OAAM,GAAI,IAAI,CAACG,YAAY;QAChC,IAAI,CAACF,eAAc,GAAI,IAAI,CAACD,OAAO;QACnC,IAAI,CAACE,OAAM,GAAI,KAAK;QACpB;MACF;MAEA,IAAI;QACF,MAAMQ,QAAO,GAAI,MAAMhB,KAAK,CAACiB,GAAG,CAC9B,uCACF,CAAC;QACD,IAAI,CAACX,OAAM,GAAIU,QAAQ,CAACX,IAAI;QAC5B,IAAI,CAACI,YAAW,GAAIO,QAAQ,CAACX,IAAI;QACjC,IAAI,CAACE,eAAc,GAAI,IAAI,CAACD,OAAO;MACrC,EAAE,OAAOY,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD,UAAU;QACR,IAAI,CAACV,OAAM,GAAI,KAAK;MACtB;IACF,CAAC;IACDY,aAAaA,CAAA,EAAG;MACd,IAAI,IAAI,CAACV,WAAW,EAAE;QACpB,IAAI,CAACH,eAAc,GAAI,IAAI,CAACD,OAAO,CAACe,MAAM,CAAEC,OAAO,IACjDA,OAAO,CAACC,aAAY,CACjBC,WAAW,CAAC,EACZC,QAAQ,CAAC,IAAI,CAACf,WAAW,CAACc,WAAW,CAAC,CAAC,CAC5C,CAAC;MACH,OAAO;QACL,IAAI,CAACjB,eAAc,GAAI,IAAI,CAACD,OAAO;MACrC;IACF,CAAC;IACDoB,kBAAkBA,CAAA,EAAG;MACnB,IAAI,CAACf,uBAAsB,GAAI,IAAI;IACrC,CAAC;IACDgB,UAAUA,CAACL,OAAO,EAAE;MAClB,IAAI,CAACT,cAAa,GAAIS,OAAO,EAAE;MAC/B,IAAI,CAACV,wBAAuB,GAAI,IAAI,EAAE;IACxC,CAAC;IACDgB,UAAUA,CAACC,SAAS,EAAE;MACpB,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,SAAS,CAAC;MAChC,OAAOC,IAAI,CAACE,kBAAkB,CAAC,OAAO,CAAC;IACzC;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAAClB,UAAU,CAAC,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}